<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="32" cy="32" r="28" fill="%23ff6a3d"/></svg>'>
  <title>Lolaelo Extranet - Manage Bookings</title>

  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{ --bg:#0b1320; --card:#111a2b; --fg:#e8eefc; --muted:#9bb0d3; --accent:#ff6a3d; --line:rgba(255,255,255,.08); }
    *{ box-sizing:border-box }
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;
      background: radial-gradient(1000px 600px at 20% -10%, #1a2b4a 0%, #0b1320 60%, #0b1320 100%);
      color:var(--fg); min-height:100vh;
    }
    .wrap{ max-width:980px; margin:0 auto; padding:24px; }
    .topbar{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px; }
    .brand{ display:flex; align-items:center; gap:10px; }
    .brand .dot{ width:10px; height:10px; border-radius:999px; background:#2bbb6f; box-shadow:0 0 0 3px rgba(43,187,111,.25) }
    .brand .title{ font-size:16px; color:#cfe0ff }
    .btn{
      appearance:none; border:1px solid var(--accent); background:var(--accent); color:#fff;
      padding:9px 14px; border-radius:999px; font-weight:700; cursor:pointer;
    }
    .btn.secondary{ background:transparent; border-color:#2e7bff; color:#d7e5ff }
    .btn.ghost{ background:transparent; border-color:var(--line); color:#cfe0ff }

    .btn.ok{
      background:transparent;
      border-color:rgba(43,187,111,.55);
      color:#bff7d2;
    }
    .btn.no{
      background:transparent;
      border-color:rgba(220,38,38,.55);
      color:#ffb4b4;
    }

    .card{
      background:var(--card); border:1px solid var(--line); border-radius:16px; padding:18px;
      box-shadow:0 8px 40px rgba(0,0,0,.45);
    }
    h1{ margin:0; font-size:22px }
    p{ margin:6px 0 0; color:var(--muted); font-size:14px; line-height:1.35 }

    .toolbar{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }
    input, select{
      padding:10px 12px; border-radius:10px; border:1px solid var(--line);
      background:#0e1830; color:var(--fg); outline:none;
    }
    input:focus, select:focus{ border-color:#2e7bff; box-shadow:0 0 0 3px rgba(46,123,255,.20) }

    table{ width:100%; border-collapse:collapse; margin-top:14px; }
    th, td{ padding:10px 10px; border-bottom:1px solid #203150; font-size:13px; vertical-align:top; }
    th{ text-align:left; color:#bcd3ff; font-weight:700; }
    .muted{ color:var(--muted) }
    .pill{
      display:inline-block; padding:3px 10px; border-radius:999px; font-size:12px; border:1px solid var(--line);
      background:#0e1830; color:#cfe0ff;
    }
    .pill.orange{ border-color:rgba(255,106,61,.35); color:#ffb59f; }
    .pill.green{ border-color:rgba(43,187,111,.35); color:#bff7d2; }
    .pill.red{ border-color:rgba(255,90,90,.35); color:#ffb4b4; }

    .note{
      margin-top:12px; font-size:13px; color:#cfe0ff;
      background:#0e1830; border:1px solid var(--line); border-radius:12px; padding:12px;
    }
    
    /* Tabs */
    .tabs{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    margin-top:14px;
    }
    .tab{
    appearance:none;
    border:1px solid var(--line);
    background:#0e1830;
    color:#cfe0ff;
    padding:8px 12px;
    border-radius:999px;
    font-weight:700;
    cursor:pointer;
    font-size:13px;
    }
    .tab:hover{ filter:brightness(1.08) }
    .tab.active{
    border-color:rgba(255,106,61,.55);
    box-shadow:0 0 0 3px rgba(255,106,61,.16);
    }

  </style>

  <script>
    const API_BASE = (location.hostname.endsWith('lolaelo.com'))
      ? 'https://lolaelo-api.onrender.com'
      : location.origin;

    function getToken(){
      return localStorage.getItem("partnerToken") || localStorage.getItem("lolaelo_session") || "";
    }

    function goBack(){
      location.href = "/partners_app.html";
    }

    function readQuery(){
      const q = new URLSearchParams(location.search);
      return {
        bookingRef: q.get('bookingRef') || '',
        result: q.get('result') || ''   // confirmed | declined | expired | used | invalid
      };
    }

    function renderResultBanner(){
      const { result } = readQuery();
      const el = document.getElementById('resultBanner');
      if (!el) return;

      if (!result) { el.style.display = 'none'; return; }

      let label = '';
      let cls = 'pill';

      if (result === 'confirmed') { label = 'Booking confirmed'; cls += ' green'; }
      else if (result === 'declined') { label = 'Booking declined'; cls += ' red'; }
      else if (result === 'expired') { label = 'Link expired'; cls += ' orange'; }
      else if (result === 'used') { label = 'Link already used'; cls += ' orange'; }
      else { label = 'Invalid link'; cls += ' orange'; }

      el.innerHTML = `<span class="${cls}">${label}</span>`;
      el.style.display = 'block';
    }

    window.addEventListener('DOMContentLoaded', () => {
      renderResultBanner();

      // Default tab
      setActiveTab('pending');

      // Wire tab buttons
      const btnPending   = document.getElementById('tabPending');
      const btnCompleted = document.getElementById('tabCompleted');
      const btnCanceled  = document.getElementById('tabCanceled');

      if (btnPending)   btnPending.addEventListener('click', () => setActiveTab('pending'));
      if (btnCompleted) btnCompleted.addEventListener('click', () => setActiveTab('completed'));
      if (btnCanceled)  btnCanceled.addEventListener('click', () => setActiveTab('canceled'));

      // Token check (future secured endpoints)
      const t = getToken();
      if (!t) console.log('[manage bookings] no token present');
    });

    function setActiveTab(key){
      const tabs = [
        { key:'pending',   id:'tabPending'   },
        { key:'completed', id:'tabCompleted' },
        { key:'canceled',  id:'tabCanceled'  }
      ];

      tabs.forEach(t => {
        const el = document.getElementById(t.id);
        if (el) el.classList.toggle('active', t.key === key);
      });

      const stateEl = document.getElementById('tabState');
      if (stateEl) stateEl.value = key;

      const empty = document.getElementById('emptyRowText');
      const note  = document.getElementById('noteText');

      if (empty) {
        if (key === 'pending')
          empty.textContent = 'No pending or active bookings loaded yet. Next step is wiring the list endpoint.';
        if (key === 'completed')
          empty.textContent = 'No completed stays loaded yet. Next step is wiring the list endpoint.';
        if (key === 'canceled')
          empty.textContent = 'No canceled or expired bookings loaded yet. Next step is wiring the list endpoint.';
      }

      if (note) {
        if (key === 'pending')
          note.textContent = 'Next wiring: when hotel clicks Confirm or Decline in the email, the endpoint can redirect back here with ?result=confirmed or ?result=declined plus the booking ref.';
        if (key === 'completed')
          note.textContent = 'Completed means the traveler stayed and checked out with no incidents.';
        if (key === 'canceled')
          note.textContent = 'Canceled or expired means no confirmed booking occurred. This includes hotel decline, token expiry, or cancellation.';
      }
      // LOAD DATA FOR CURRENT TAB
      loadBookingsForActiveTab().catch(() => {});
    }

    function esc(s){
      return String(s == null ? "" : s)
        .replace(/&/g,"&amp;")
        .replace(/</g,"&lt;")
        .replace(/>/g,"&gt;")
        .replace(/"/g,"&quot;")
        .replace(/'/g,"&#39;");
    }

    function fmtYmd(d){
      if (!d) return "";
      const dt = new Date(d);
      if (Number.isNaN(dt.getTime())) return "";
      const y = dt.getFullYear();
      const m = String(dt.getMonth() + 1).padStart(2, "0");
      const day = String(dt.getDate()).padStart(2, "0");
      return `${y}-${m}-${day}`;
    }

    function formatMoney(val, currency){
      const n = Number(val || 0);
      if (!Number.isFinite(n)) return "-";
      return `${currency} ${n.toFixed(2)}`;
    }

    async function openBookingModal(bookingRef){
      const modal = document.getElementById("bookingModal");
      const title = document.getElementById("bmTitle");
      const sub = document.getElementById("bmSubtitle");
      const summary = document.getElementById("bmSummary");
      const itemsEl = document.getElementById("bmItems");
      const totalEl = document.getElementById("bmTotal");

      if (!modal || !itemsEl) return;

      modal.style.display = "block";
      itemsEl.innerHTML = `<tr><td colspan="5" class="muted" style="padding:10px;">Loading...</td></tr>`;

      const tab = document.getElementById("tabState")?.value || "pending";
      const bucket =
        tab === "completed" ? "completed" :
        tab === "canceled" ? "canceled" :
        "pending";

      const headers = {};
      const partnerId = 2; // still temporary
      headers["x-partner-id"] = String(partnerId);

      const session = localStorage.getItem("lolaelo_session");
      const partnerToken = localStorage.getItem("partnerToken");
      if (session) headers["Authorization"] = `Bearer ${session}`;
      if (partnerToken) headers["x-partner-token"] = partnerToken;

      const url = `${API_BASE}/api/extranet/me/bookings/${encodeURIComponent(bookingRef)}`;
      const res = await fetch(url, { headers });
      const data = await res.json();

      // Prepare add-ons section (reset)
      const addonsTitle = document.getElementById("bmAddonsTitle");
      const addonsTable = document.getElementById("bmAddonsTable");
      const addonsBody  = document.getElementById("bmAddons");

      if (addonsTitle && addonsTable && addonsBody) {
        addonsTitle.style.display = "none";
        addonsTable.style.display = "none";
        addonsBody.innerHTML = "";
      }

      if (!data || !data.ok) {
        itemsEl.innerHTML = `<tr><td colspan="5" class="muted" style="padding:10px;">Failed loading booking.</td></tr>`;
        return;
      }

      const b = data.booking || {};
      const items = Array.isArray(data.items) ? data.items : [];
      const addons = Array.isArray(data.addons) ? data.addons : [];

      // Derive stay info from items (authoritative)
      let minIn = null;
      let maxOut = null;
      let sameWindow = true;

      if (items.length) {
        const firstIn = fmtYmd(items[0].checkInDate);
        const firstOut = fmtYmd(items[0].checkOutDate);

        items.forEach(it => {
          const ci = new Date(it.checkInDate);
          const co = new Date(it.checkOutDate);
          if (!Number.isNaN(ci.getTime())) minIn = (minIn && minIn < ci) ? minIn : ci;
          if (!Number.isNaN(co.getTime())) maxOut = (maxOut && maxOut > co) ? maxOut : co;

          if (fmtYmd(it.checkInDate) !== firstIn || fmtYmd(it.checkOutDate) !== firstOut) {
            sameWindow = false;
          }
        });
      }

      const modalStay =
        (!items.length) ? ((b.checkInDate && b.checkOutDate) ? `${fmtYmd(b.checkInDate)} to ${fmtYmd(b.checkOutDate)}` : "-")
        : (sameWindow ? `${fmtYmd(minIn)} to ${fmtYmd(maxOut)}` : "Multiple varying dates");

      const currency = (items[0]?.currency || b.currency || "USD");

      if (title) title.textContent = `Booking ${b.bookingRef || bookingRef}`;
      if (sub) sub.textContent = `${b.propertyName || ""}`.trim();

      const guest = [b.travelerFirstName, b.travelerLastName].filter(Boolean).join(" ").trim() || "Traveler";
      const stayTxt = modalStay;
      if (summary) {
        summary.innerHTML = `
          <div><b>Guest:</b> ${esc(guest)}</div>
          <div><b>Stay:</b> ${esc(stayTxt)}</div>
          <div><b>Status:</b> ${esc(b.status || "-")}</div>
          <div><b>Guests:</b> ${esc(b.guests ?? "-")}</div>
          <div><b>Payment:</b> ${esc(b.paymentProvider || "-")} ${esc(b.providerPaymentId || "")}</div>
        `;
      }

      let total = 0;
      itemsEl.innerHTML = items.map(it => {
        const dates = `${fmtYmd(it.checkInDate)} to ${fmtYmd(it.checkOutDate)}`;
        const lt = Number(it.lineTotal || 0);
        total += (Number.isFinite(lt) ? lt : 0);

        return `
          <tr>
            <td style="padding:8px; border-bottom:1px solid #203150;">${esc(it.roomTypeName || it.roomTypeId || "-")}</td>
            <td style="padding:8px; border-bottom:1px solid #203150;">${esc(it.ratePlanName || it.ratePlanId || "-")}</td>
            <td style="padding:8px; border-bottom:1px solid #203150;" class="muted">${esc(dates)}</td>
            <td style="padding:8px; border-bottom:1px solid #203150; text-align:right;">${esc(it.qty)}</td>
            <td style="padding:8px; border-bottom:1px solid #203150; text-align:right;">${esc(formatMoney(it.lineTotal, it.currency || currency))}</td>
          </tr>
        `;
      }).join("");

      // Render add-ons table
      if (addonsTitle && addonsTable && addonsBody && addons.length) {
        addonsTitle.style.display = "";
        addonsTable.style.display = "";

        addonsBody.innerHTML = addons.map(a => {
          const qty = Number(a.qty || 0) || 0;
          const unit = Number(a.unitPrice || 0) || 0;
          const line = Number(a.lineTotal || 0) || 0;
          const cur = String(a.currency || currency || "USD").toUpperCase();

          return `
            <tr>
              <td style="padding:8px; border-bottom:1px solid #203150;">${esc(a.activity || "")}</td>
              <td style="padding:8px; border-bottom:1px solid #203150;">${esc(a.uom || "")}</td>
              <td style="padding:8px; border-bottom:1px solid #203150; text-align:right;">${esc(qty)}</td>
              <td style="padding:8px; border-bottom:1px solid #203150; text-align:right;">${esc(formatMoney(unit, cur))}</td>
              <td style="padding:8px; border-bottom:1px solid #203150; text-align:right;">${esc(formatMoney(line, cur))}</td>
            </tr>
          `;
        }).join("");
      }

      if (totalEl) totalEl.textContent = formatMoney(total, currency);
    }

    function closeBookingModal(){
      const modal = document.getElementById("bookingModal");
      if (modal) modal.style.display = "none";
    }

    function statusPill(status){
      const s = String(status || "");
      if (s === "PENDING_HOTEL_CONFIRMATION") return `<span class="pill orange">Pending</span>`;
      if (s === "CONFIRMED") return `<span class="pill green">Confirmed</span>`;
      if (s === "DECLINED_BY_HOTEL") return `<span class="pill red">Declined</span>`;
      if (s === "EXPIRED_NO_RESPONSE") return `<span class="pill orange">Expired</span>`;
      if (s === "CANCELED_BY_TRAVELER") return `<span class="pill orange">Canceled</span>`;
      return `<span class="pill">${esc(s)}</span>`;
    }

    function renderBookings(rows){
      const tbody = document.getElementById("bookingsTbody");
      if (!tbody) return;

      if (!rows || !rows.length){
        tbody.innerHTML = `
          <tr>
            <td class="muted" colspan="9" id="emptyRowText">
              No pending or active bookings loaded yet.
            </td>
          </tr>`;
        return;
      }

      tbody.innerHTML = rows.map(r => {
        const guest = [r.travelerFirstName, r.travelerLastName]
          .filter(Boolean).join(" ") || "Traveler";

        const hasVary = !!r.hasVaryingDates;

        const stay = hasVary
          ? "Multiple varying dates (View)"
          : (r.minCheckInDate && r.maxCheckOutDate)
              ? `${fmtYmd(r.minCheckInDate)} to ${fmtYmd(r.maxCheckOutDate)}`
              : `${fmtYmd(r.checkInDate)} to ${fmtYmd(r.checkOutDate)}`;

        return `
          <tr>
            <td><span class="muted">${esc(r.bookingRef)}</span></td>
            <td>${esc(guest)}</td>
            <td>
              ${(() => {
                const label = esc(stay);
                const ref = esc(r.bookingRef);
                const clickable = true; // always allow click to view items
                if (!clickable) return `<span class="muted">${label}</span>`;
                return `<button class="btn ghost" type="button" onclick="openBookingModal('${ref}')" style="padding:6px 10px;">${label}</button>`;
              })()}
            </td>
            <td>${esc(r.roomCategory || "-")}</td>
            <td>${esc(r.ratePlan || "-")}</td>
            <td>${Number(r.itemCount || 0) || 0}</td>
            <td style="text-align:right;">${esc(formatMoney(
              (r.grandTotal != null ? r.grandTotal : (Number(r.itemsTotal || 0) + Number(r.addonsTotal || 0))),
              r.currency || "USD"
            ))}</td>
            <td>${statusPill(r.status)}</td>
            <td>
              ${(() => {
                const isPending = String(r.status) === "PENDING_HOTEL_CONFIRMATION";
                const token = r.confirmToken || "";
                if (isPending && token) {
                  const cUrl = `${API_BASE}/api/bookings/confirm?token=${encodeURIComponent(token)}`;
                  const dUrl = `${API_BASE}/api/bookings/decline?token=${encodeURIComponent(token)}`;
                  return `
                    <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
                      <button class="btn ghost" type="button" onclick="openBookingModal('${esc(r.bookingRef)}')">View</button>
                      <a class="btn ok" href="${cUrl}">Confirm</a>
                      <a class="btn no" href="${dUrl}">Decline</a>
                    </div>
                  `;
                }
                return `<button class="btn ghost" type="button" onclick="openBookingModal('${esc(r.bookingRef)}')">View</button>`;
              })()}
            </td>
          </tr>
        `;
      }).join("");
    }

    async function loadBookingsForActiveTab(){
      const tab = document.getElementById("tabState")?.value || "pending";
      const partnerId = 2; // temporary, will come from session later

      const bucket =
        tab === "completed" ? "completed" :
        tab === "canceled" ? "canceled" :
        "pending";

      const url = `${API_BASE}/api/extranet/me/bookings?bucket=${bucket}`;
      const headers = {};
      const session = localStorage.getItem("lolaelo_session");
      const partnerToken = localStorage.getItem("partnerToken");

      if (session) headers["Authorization"] = `Bearer ${session}`;
      if (partnerToken) headers["x-partner-token"] = partnerToken;
      headers["x-partner-id"] = String(partnerId);

      const res = await fetch(url, { headers });

      const data = await res.json();

      if (!data || !data.ok) {
        renderBookings([]);
        return;
      }

      renderBookings(data.rows);
    }

  </script>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <div class="title">Lolaelo Extranet</div>
      </div>
      <div style="display:flex; gap:8px;">
        <button class="btn ghost" type="button" onclick="goBack()">Back to menu</button>
        <a class="btn secondary" href="mailto:support@lolaelo.com" style="text-decoration:none; display:inline-flex; align-items:center;">
          Support
        </a>
      </div>
    </div>

    <div class="card">
      <div style="display:flex; align-items:flex-start; justify-content:space-between; gap:12px; flex-wrap:wrap;">
        <div>
          <h1>Manage bookings</h1>
          <p>Review requests, confirm or decline, and keep a clean record of what happened.</p>
        </div>
        <div id="resultBanner" style="display:none;"></div>
      </div>

      <div class="tabs" aria-label="Booking tabs">
        <button class="tab active" id="tabPending" type="button">Pending / Active</button>
        <button class="tab" id="tabCompleted" type="button">Completed</button>
        <button class="tab" id="tabCanceled" type="button">Canceled / Expired (no response)</button>
        <input type="hidden" id="tabState" value="pending" />
      </div>

      <div class="toolbar" aria-label="Booking tools">
        <input id="searchRef" type="text" placeholder="Search by booking ref (e.g. LL-SD28RB)" style="flex:1 1 280px;" />
        <select id="statusFilter">
          <option value="">All statuses</option>
          <option value="PENDING_HOTEL_CONFIRMATION">Pending confirmation</option>
          <option value="CONFIRMED">Confirmed</option>
          <option value="DECLINED_BY_HOTEL">Declined</option>
        </select>
        <button class="btn" type="button" onclick="alert('Wiring next: bookings list endpoint + filters.');">Search</button>
      </div>

      <table aria-label="Bookings table">
        <thead>
          <tr>
            <th style="width:150px;">Booking ref</th>
            <th>Guest</th>
            <th style="width:220px;">Stay dates</th>
            <th style="width:160px;">Room category</th>
            <th style="width:160px;">Rate plan</th>
            <th style="width:80px;">Items</th>
            <th style="width:120px;">Total</th>
            <th style="width:190px;">Status</th>
            <th style="width:170px;">Actions</th>
          </tr>
        </thead>
          <tbody id="bookingsTbody">
            <tr>
              <td class="muted" colspan="9" id="emptyRowText">
                No pending or active bookings loaded yet. Next step is wiring the list endpoint.</td>
            </tr>
          </tbody>
      </table>

      <div class="note" id="noteText">
        Next wiring: when hotel clicks Confirm or Decline in the email, the endpoint can redirect back here with ?result=confirmed or ?result=declined plus the booking ref.
      </div>

      <!-- ANCHOR: BOOKING_MODAL -->
      <div id="bookingModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.55); z-index:9999; padding:18px; overflow:auto;">
        <div style="max-width:900px; margin:0 auto; background:var(--card); border:1px solid var(--line); border-radius:16px; box-shadow:0 10px 60px rgba(0,0,0,.6);">
          <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 16px; border-bottom:1px solid #203150;">
            <div>
              <div style="font-weight:800; font-size:15px;" id="bmTitle">Booking</div>
              <div class="muted" style="font-size:12px;" id="bmSubtitle"></div>
            </div>
            <button class="btn ghost" type="button" onclick="closeBookingModal()">Close</button>
          </div>

          <div style="padding:14px 16px;">
            <div id="bmSummary" class="note" style="margin-top:0;"></div>

            <h3 style="margin:14px 0 8px; font-size:14px;">Rooms booked</h3>
            <table style="width:100%; border-collapse:collapse;">
              <thead>
                <tr>
                  <th style="text-align:left; padding:8px; border-bottom:1px solid #203150;">Room</th>
                  <th style="text-align:left; padding:8px; border-bottom:1px solid #203150;">Rate plan</th>
                  <th style="text-align:left; padding:8px; border-bottom:1px solid #203150;">Dates</th>
                  <th style="text-align:right; padding:8px; border-bottom:1px solid #203150;">Qty</th>
                  <th style="text-align:right; padding:8px; border-bottom:1px solid #203150;">Line total</th>
                </tr>
              </thead>
              <tbody id="bmItems"></tbody>
              <tfoot>
                <tr>
                  <td colspan="4" style="padding:10px 8px; text-align:right; font-weight:800;">Total</td>
                  <td style="padding:10px 8px; text-align:right; font-weight:800;" id="bmTotal"></td>
                </tr>
              </tfoot>
            </table>
            <!-- ANCHOR: BOOKING_MODAL_ADDONS -->
            <h3 style="margin:14px 0 8px; font-size:14px; display:none;" id="bmAddonsTitle">Add-ons</h3>
            <table style="width:100%; border-collapse:collapse; display:none;" id="bmAddonsTable">
              <thead>
                <tr>
                  <th style="text-align:left; padding:8px; border-bottom:1px solid #203150;">Activity</th>
                  <th style="text-align:left; padding:8px; border-bottom:1px solid #203150;">UOM</th>
                  <th style="text-align:right; padding:8px; border-bottom:1px solid #203150;">Qty</th>
                  <th style="text-align:right; padding:8px; border-bottom:1px solid #203150;">Unit</th>
                  <th style="text-align:right; padding:8px; border-bottom:1px solid #203150;">Line total</th>
                </tr>
              </thead>
              <tbody id="bmAddons"></tbody>
            </table>
            <!-- ANCHOR: BOOKING_MODAL_ADDONS END -->
          </div>
        </div>
      </div>
      <!-- ANCHOR: BOOKING_MODAL END -->

    </div>
  </div>
</body>
</html>
